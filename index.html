<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ëŠ¥ì¤‘í•™êµ 1-4 ë‹¨í†¡ë°©</title>
    <style>
        :root {
            /* Muted Sage & Cool Grey Tone */
            --chat-bg: #CFD8DC;       
            --header-bg: #ECEFF1;     
            --bubble-bg: #FFFFFF;     
            --text-primary: #37474F;  
            --text-secondary: #78909C;
            --pc-body-bg: #f0f0f0;
            --drawer-bg: #FFFFFF;
            --btn-contact: #546E7A;
            --btn-block: #D32F2F;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-color: var(--pc-body-bg);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden;
        }

        /* 1. HTML ë‚´ì¥ SVG ë…¸ì´ì¦ˆ ë ˆì´ì–´ */
        #noise-layer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.05; /* í‰ì†Œì—ëŠ” ì•„ì£¼ í¬ë¯¸í•˜ê²Œ */
            transition: opacity 0.1s ease;
            /* SVG Data URIë¡œ ë…¸ì´ì¦ˆ íŒ¨í„´ ìì²´ ìƒì„± */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
        }

        /* ë©˜ì…˜ ë‹¹í–ˆì„ ë•Œ ë…¸ì´ì¦ˆê°€ ê°•í•´ì§€ëŠ” í´ë˜ìŠ¤ */
        #noise-layer.glitch-active {
            opacity: 0.3; /* ë…¸ì´ì¦ˆ ê°•ë„ ì¦ê°€ */
            animation: noise-shake 0.2s infinite;
        }

        @keyframes noise-shake {
            0% { transform: translate(0,0); }
            25% { transform: translate(-5px, 5px); }
            50% { transform: translate(5px, -5px); }
            75% { transform: translate(-5px, -5px); }
            100% { transform: translate(0,0); }
        }

        /* 2. í™”ë©´ ì§„ë™ íš¨ê³¼ (ì»¨í…Œì´ë„ˆìš©) */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            100% { transform: translate(1px, 1px) rotate(0deg); }
        }

        .shake-active {
            animation: shake 0.5s infinite;
        }

        .chat-container {
            width: 100%; max-width: 380px;
            height: 90vh; 
            aspect-ratio: 9/16;
            background-color: var(--chat-bg);
            display: flex; flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
            z-index: 1; /* ë…¸ì´ì¦ˆ ì•„ë˜ */
        }

        /* --- í—¤ë” --- */
        header {
            padding: 15px; display: flex; align-items: center; justify-content: space-between;
            color: var(--text-primary); flex-shrink: 0; background-color: var(--header-bg);
            z-index: 10; border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        header .title h1 { font-size: 15px; margin: 0; text-align: center; color: var(--text-primary); }
        header .title span { font-size: 11px; opacity: 0.7; }
        
        .announcement {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 10px 15px;
            display: flex; align-items: flex-start;
            font-size: 12px; color: var(--text-primary);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            flex-shrink: 0; z-index: 5; margin: 0;
            backdrop-filter: blur(5px);
        }

        /* --- ë“œë¡œì–´ --- */
        #notice-drawer {
            position: absolute; top: 0; right: -100%;
            width: 100%; height: 100%;
            background: var(--drawer-bg);
            transition: right 0.3s ease;
            z-index: 100;
            display: flex; flex-direction: column;
        }
        #notice-drawer.active { right: 0; }
        .drawer-header { padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; justify-content: space-between; }
        .drawer-tabs { display: flex; border-bottom: 1px solid #eee; background: #f9f9f9; }
        .tab { flex: 1; text-align: center; padding: 10px; font-size: 12px; color: #888; border-bottom: 2px solid transparent; }
        .tab.active { color: #333; border-bottom: 2px solid #333; font-weight: bold; }
        .notice-list { flex-grow: 1; overflow-y: auto; }
        .notice-item { padding: 15px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; }
        .notice-item .content { flex-grow: 1; }
        .notice-item .title { font-size: 14px; color: #333; margin-bottom: 5px; }
        .notice-item .date { font-size: 11px; color: #aaa; }
        .notice-check { color: #ccc; font-size: 18px; }

        /* --- ì±„íŒ…ì°½ --- */
        #chat-log {
            flex-grow: 1; padding: 15px 10px;
            overflow-y: auto; display: flex; flex-direction: column; gap: 12px;
            scroll-behavior: smooth;
        }
        #chat-log::-webkit-scrollbar { width: 4px; }
        #chat-log::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.1); border-radius: 4px; }

        .message { display: flex; align-items: flex-start; animation: fadeIn 0.4s ease-in-out; }
        
        /* í”„ë¡œí•„ ì´ë¯¸ì§€ */
        .profile-img { 
            width: 38px; height: 38px; border-radius: 14px; margin-right: 10px; 
            flex-shrink: 0; border: 1px solid rgba(0,0,0,0.05); 
            cursor: pointer; 
            transition: transform 0.1s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #ddd; 
        }
        .profile-img:active { transform: scale(0.95); }

        .message-content { max-width: 75%; }
        .nickname { font-size: 12px; color: #546E7A; margin-bottom: 4px; padding-left: 2px; }
        .bubble { 
            padding: 9px 13px; 
            border-radius: 14px; 
            font-size: 13px; 
            line-height: 1.5; 
            background-color: var(--bubble-bg); 
            color: #263238; 
            border-top-left-radius: 2px; 
            position: relative; 
            box-shadow: 0 1px 1px rgba(0,0,0,0.05);
        }
        .mention { color: #D32F2F; font-weight: 600; background: rgba(211, 47, 47, 0.05); padding: 0 2px; border-radius: 3px; }

        footer { 
            background-color: #F5F5F5; padding: 15px; 
            text-align: center; font-size: 12px; color: #90A4AE; 
            flex-shrink: 0; border-top: 1px solid rgba(0,0,0,0.05);
        }

        /* --- í”„ë¡œí•„ ëª¨ë‹¬ --- */
        #profile-modal {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            z-index: 200;
            display: flex; align-items: flex-end; 
            visibility: hidden; opacity: 0;
            transition: all 0.25s ease;
        }
        #profile-modal.active { visibility: visible; opacity: 1; }

        .modal-card {
            width: 100%; height: 100%;
            background: #fff;
            display: flex; flex-direction: column;
            position: relative;
        }

        .close-btn {
            position: absolute; top: 20px; left: 20px;
            font-size: 24px; color: #444; cursor: pointer;
            z-index: 202; background: none; border: none; padding: 5px;
        }

        .profile-bg {
            flex: 2;
            background-color: #FAFAFA;
            background-image: 
                linear-gradient(#E0E0E0 1px, transparent 1px),
                linear-gradient(90deg, #E0E0E0 1px, transparent 1px);
            background-size: 30px 30px;
            position: relative;
        }

        .modal-avatar {
            width: 90px; height: 90px;
            border-radius: 38%;
            position: absolute;
            bottom: -45px; left: 50%;
            transform: translateX(-50%);
            border: 5px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 10;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #eee;
        }

        .profile-info {
            flex: 1.8;
            background: white;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 55px;
        }

        .modal-name { font-size: 18px; font-weight: 700; color: #263238; margin-bottom: 8px; }
        .modal-status {
            font-size: 13px; color: #78909C;
            margin-bottom: 30px; text-align: center;
            padding: 0 20px; line-height: 1.4;
        }

        .profile-actions {
            display: flex; gap: 15px;
            margin-top: auto; margin-bottom: 50px;
            width: 80%; justify-content: center;
        }
        .action-btn {
            flex: 1; padding: 12px 0;
            border-radius: 8px; border: none;
            font-size: 13px; font-weight: 600; cursor: pointer;
            display: flex; justify-content: center; align-items: center; gap: 6px;
            transition: opacity 0.2s;
        }
        .action-btn:active { opacity: 0.8; }
        
        .btn-contact {
            background-color: var(--btn-contact); color: white;
        }
        .btn-block {
            background-color: transparent; 
            border: 1px solid var(--btn-block); color: var(--btn-block);
        }

    </style>
</head>
<body>

<!-- ë…¸ì´ì¦ˆ íš¨ê³¼ ë ˆì´ì–´ (HTML ë‚´ì¥) -->
<div id="noise-layer"></div>

<div class="chat-container" id="main-container">
    
    <!-- ê³µì§€ ë“œë¡œì–´ -->
    <div id="notice-drawer">
        <div class="drawer-header">
            <div onclick="toggleDrawer()" style="cursor:pointer;">â† 1-4</div>
            <div style="font-weight: bold;">ê³µì§€</div>
            <div style="font-size: 20px;">âœ</div>
        </div>
        <div class="drawer-tabs">
            <div class="tab">ì „ì²´</div>
            <div class="tab active">ê³µì§€</div>
            <div class="tab">íˆ¬í‘œ</div>
            <div class="tab">ì‚¬ì§„</div>
        </div>
        <div class="notice-list">
            <div class="notice-item">
                <div class="content">
                    <div class="title">2026í•™ë…„ë„ ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì êµìœ¡ê¸‰ì—¬ ì‹ ì²­ ì•ˆë‚´</div>
                    <div class="date">2026ë…„ 3ì›” 10ì¼ ì˜¤ì „ 9:00 Â· ë°˜ì¥ ë°•ê±´ìš°</div>
                </div>
                <div class="notice-check">â˜‘</div>
            </div>
            <div class="notice-item">
                <div class="content" style="color: #d32f2f;">
                    <div class="title">ë°©ê³¼ í›„ êµì‹¤ ì´ë™ ì‹œ ì •ìˆ™ ìœ ì§€í•  ê²ƒ (ê²½ê³ )</div>
                    <div class="date">2026ë…„ 4ì›” 5ì¼ ì˜¤í›„ 4:00 Â· ë°˜ì¥ ë°•ê±´ìš°</div>
                </div>
                <div class="notice-check">â˜‘</div>
            </div>
        </div>
    </div>

    <!-- í”„ë¡œí•„ ëª¨ë‹¬ -->
    <div id="profile-modal">
        <div class="modal-card">
            <button class="close-btn" onclick="closeProfile()">âœ•</button>
            <div class="profile-bg">
                <div class="modal-avatar" id="modal-avatar-img"></div>
            </div>
            <div class="profile-info">
                <div class="modal-name" id="modal-name-text">ì´ë¦„</div>
                <div class="modal-status" id="modal-status-text">ìƒíƒœë©”ì‹œì§€</div>
                
                <div class="profile-actions">
                    <button class="action-btn btn-contact">
                        <span>ğŸ’¬</span> ì—°ë½í•˜ê¸°
                    </button>
                    <button class="action-btn btn-block">
                        <span>ğŸš«</span> ì°¨ë‹¨í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- í—¤ë” -->
    <header>
        <div style="font-size: 18px; color:#546E7A;">ã€ˆ</div>
        <div class="title"><h1>1í•™ë…„ 4ë°˜ <span>27</span></h1></div>
        <div style="font-size: 18px; cursor: pointer; color:#546E7A;" onclick="toggleDrawer()">â˜°</div>
    </header>

    <div class="announcement">
        ğŸ“¢ ê³µì§€: ë¶ˆí•„ìš”í•œ ëŒ€í™” ìì œ. í—˜ë‹´ ê¸ˆì§€. (ë°˜ì¥: ë°•ê±´ìš°)
    </div>

    <main id="chat-log"></main>

    <footer>ëŒ€í™”ì— ì°¸ì—¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</footer>
</div>

<script>
    const chatLog = document.getElementById('chat-log');
    const container = document.getElementById('main-container');
    const drawer = document.getElementById('notice-drawer');
    const profileModal = document.getElementById('profile-modal');
    const noiseLayer = document.getElementById('noise-layer');
    
    // ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œ
    const modalName = document.getElementById('modal-name-text');
    const modalStatus = document.getElementById('modal-status-text');
    const modalAvatar = document.getElementById('modal-avatar-img');

    function toggleDrawer() {
        drawer.classList.toggle('active');
    }

    // NPC ë°ì´í„° (URL ì§ì ‘ ì—°ê²°)
    const characterData = {
        "ë°•ê±´ìš°": { 
            img: "https://poft.uk/kyryll/profile-geonu.png", 
            status: "ë°˜ì¥ / ê³µì§€ í•„ë…. ê°œì¸ í†¡ ì‚¬ì ˆ." 
        },
        "ì •í•˜ëŠ˜": { 
            img: "https://poft.uk/kyryll/profile-haneul.png", 
            status: "..." 
        },
        "ì†¡í˜„ìš°": { 
            img: "https://poft.uk/kyryll/profile-hyeonu.png", 
            status: "No pain No gain ğŸ’ª" 
        },
        "ìœ¤ì§€í›„": { 
            img: "https://poft.uk/kyryll/profile-jifu.png", 
            status: "ë‚´ê°€ ê·¸ë¦° ê¸°ë¦° ê·¸ë¦¼" 
        },
        "ë„ì§„ìš°": { 
            img: "https://poft.uk/kyryll/profile-jinu.png", 
            status: "ë§¤ë„ˆ ì¢€ ì§€í‚¤ì ^^" 
        },
        "ì´ì£¼ì•„": { 
            img: "https://poft.uk/kyryll/profile-juah.png", 
            status: "Happy Day! âœ¨" 
        },
        "ê°•ë¯¼í˜¸": { 
            img: "https://poft.uk/kyryll/profile-minho.png", 
            status: "ì¶•êµ¬í•˜ê³  ì‹¶ë‹¤" 
        },
        "ìµœë¯¸ë˜": { 
            img: "https://poft.uk/kyryll/profile-mirae.png", 
            status: "ê±´ë“¤ì§€ ë§ˆì„¸ìš”. ì˜ˆë¯¼í•¨." 
        },
        "ë°•ì„œìœ¤": { 
            img: "https://poft.uk/kyryll/profile-seoyun.png", 
            status: "Be nice or go away." 
        },
        "í•œìŠ¬ê¸°": { 
            img: "https://poft.uk/kyryll/profile-seulgi.png", 
            status: ".." 
        },
        "ê¹€ì‹œìš°": { 
            img: "https://poft.uk/kyryll/profile-siu.png", 
            status: "íš¨ìœ¨ì ìœ¼ë¡œ ì‚´ì." 
        },
        "ì´ì€ì§€": { 
            img: "", 
            status: "" 
        }
    };

    // í”„ë¡œí•„ ì—´ê¸° í•¨ìˆ˜
    function showProfile(name) {
        const data = characterData[name] || { img: "", status: "" };
        
        modalName.innerText = name;
        modalStatus.innerText = data.status || "ìƒíƒœë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.";
        
        // URL ì ìš©
        if(data.img) {
            modalAvatar.style.backgroundImage = `url('${data.img}')`;
            modalAvatar.style.backgroundColor = 'transparent';
        } else {
            modalAvatar.style.backgroundImage = 'none';
            modalAvatar.style.backgroundColor = '#CFD8DC';
        }

        profileModal.classList.add('active');
    }

    function closeProfile() {
        profileModal.classList.remove('active');
    }

    // ì±„íŒ… ì‹œë‚˜ë¦¬ì˜¤
    const chatData = [
        { name: "ì´ì£¼ì•„", text: "@ì´ì€ì§€10423 ì•¼ ì€ì§€ì•¼, ì•„ê¹Œ ì„œìœ¤ì´ê°€ ì¸ì‚¬í–ˆëŠ”ë° ì™œ ë¬´ì‹œí•´? ë„ˆ ì§„ì§œ ê·¸ëŸ¬ëŠ” ê±° ì•„ë‹ˆì•¼; ì„œìœ¤ì´ ë¯¼ë§í•˜ê²Œ." },
        { name: "ìµœë¯¸ë˜", text: "ì§„ì§œ? ì™€.. ì„œìœ¤ì´ ì„±ê²©ì— ì°¸ê³  ë„˜ì–´ê°„ ê²Œ ë³´ì‚´ì´ë‹¤. ì€ì§€ ìŸ¤ëŠ” ì›ë˜ ì‚¬ëŒ ë¬´ì‹œí•˜ëŠ” ê²Œ íŠ¹ê¸°ì–ì•„." },
        { name: "ë°•ì„œìœ¤", text: "ì•„ëƒ ì–˜ë“¤ì•„. ë‚´ê°€ ì˜ ì•ˆ ë³´ì˜€ë‚˜ ë³´ì§€. ê·¼ë° ìš°ë¦¬ ë°˜ì— ì€ì§€ë¼ëŠ” ì• ê°€ ìˆì—ˆë‚˜? ê¸°ì–µì´ ì•ˆ ë‚˜ë„¤." },
        { name: "ì†¡í˜„ìš°", text: "ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ ì•¼ ìœ ë ¹ì´ëƒ? íˆ¬ëª…ì¸ê°„ ëª¨ë“œ ì©ë‹¤. @ì´ì€ì§€10423 ì½ì”¹í•˜ì§€ ë§ê³  ë§ ì¢€?" },
        { name: "ê¹€ì‹œìš°", text: "ì•Œë¦¼ ì‹œë„ëŸ¬ìš´ë° ê·¸ëƒ¥ ë‹¨í†¡ ë§ê³  ê°œì¸ í†¡ìœ¼ë¡œ í•˜ì§€? ìˆ˜í–‰í‰ê°€ ê³µì§€ ë¬»íˆì–ì•„." },
        { name: "ì •í•˜ëŠ˜", text: "ã…‡ã…ˆ. ëˆ„êµ¬ ìˆ˜í•™ 3ë²ˆ ë‹µ ì•„ëŠ” ì‚¬ëŒ? ê·¸ê±°ë§Œ ì•Œë ¤ì¤˜." },
        { name: "ì´ì£¼ì•„", text: "ì•„ ë§ë‹¤, ë‚˜ ì–´ì œ ì€ì§€ë„¤ ì•„íŒŒíŠ¸ ìª½ ì§€ë‚˜ê°”ëŠ”ë°.. ê·¸ ì¬ê±´ì¶• í•œë‹¤ë˜ ì£¼ê³µ ìˆì–ì•„. ê±°ê¸° ì§„ì§œ ìœ¼ìŠ¤ìŠ¤í•˜ë”ë¼ã…  ë¬´ì„œì›Œì„œ ì£½ëŠ” ì¤„." },
        { name: "í•œìŠ¬ê¸°", text: "ê±°ê¸°... ì•„ì§ ì‚¬ëŒ ì‚´ì•„? ë‹¤ ë‚˜ê°„ ê±° ì•„ë‹ˆì—ˆì–´..?" },
        { name: "ê°•ë¯¼í˜¸", text: "ì•¼ ë‚´ì¼ ì¡°ë³„ ìˆ˜ì—… ë•Œ ì±…ìƒ ë¶™ì—¬ì•¼ ë˜ëŠ”ë° ì€ì§€ ì±…ìƒ ìš°ë¦¬ ì¡° ìª½ìœ¼ë¡œ ë°€ì§€ ë§ˆë¼. ì¢ì•„ í„°ì§€ë‹ˆê¹Œ." },
        { name: "ìµœë¯¸ë˜", text: "@ì´ì€ì§€10423 ì€ì§€ì•¼ ê·¼ë° ë„ˆ ì§„ì§œ ì¢€ ì”»ê³  ë‹¤ë…€. ì£¼ì•„ ë§ëŒ€ë¡œ ê·¸ ë™ë„¤ ëƒ„ìƒˆ ë°°ëŠ” ê±´ì§€ ë­”ì§€, ì• ë“¤ì´ ë„ˆ ì˜†ì— ê°€ê¸° ì‹«ëŒ€. ë‚´ê°€ ì„œìœ¤ì´ ë´ì„œ ì–˜ê¸°í•´ ì£¼ëŠ” ê±°ì•¼." },
        { name: "ë„ì§„ìš°", text: "ì•¼ì•¼, ì ë‹¹íˆ í•´ë¼. ì„ ìƒë‹˜ë“¤ ê°€ë” ë¶ˆì‹œì— ë‹¨í†¡ë°© ê²€ì‚¬í•˜ëŠ” ê±° ëª¨ë¥´ëƒ? ìš°ë¦¬ ì´ë¯¸ì§€ ê´€ë¦¬ ì¢€ í•˜ì." },
        { name: "ë°•ê±´ìš°", text: "ì¡°ìš©íˆ í•´. ë¶ˆí•„ìš”í•œ ëŒ€í™” ìì œí•˜ê³  ê³µì§€ í™•ì¸í•œ ì‚¬ëŒì€ ì´ëª¨í‹°ì½˜ ë‹¬ì•„." },
        { name: "ìœ¤ì§€í›„", text: "..." },
        { name: "ì†¡í˜„ìš°", text: "@ì´ì€ì§€10423 ì•¼ ëê¹Œì§€ ë¬´ì‹œ? ã…‹ã…‹ã…‹ã…‹ ì§„ì§œ ì—†ëŠ” ì‚¬ëŒ ì·¨ê¸‰í•´ ë‹¬ë¼ ì´ê±´ê°€?" },
        { name: "ë°•ì„œìœ¤", text: "ëì–´ í˜„ìš°ì•¼. ì›ë˜ ìˆ˜ì¤€ ì•ˆ ë§ëŠ” ì‚¬ëŒì´ë‘ì€ ëŒ€í™”ê°€ ì•ˆ í†µí•˜ëŠ” ë²•ì´ì•¼. ë‚´ì¼ ë‚´ ì˜†ìë¦¬ëŠ” ë¹„ì›Œì¤˜, ë‹µë‹µí•˜ë‹ˆê¹Œ." },
        { name: "ìµœë¯¸ë˜", text: "ë¬´ìŠ¨ ëœ»ì¸ì§€ ë‹¤ë“¤ ì•Œì§€? ì„œìœ¤ì´ ì˜ˆë¯¼í•˜ë‹ˆê¹Œ ì¡°ì‹¬í•˜ì ^^" },
    ];

    let index = 0;

    function addMessage() {
        if (index < chatData.length) {
            const data = chatData[index];
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message';
            
            const charInfo = characterData[data.name] || { img: "" };
            const highlightedText = data.text.replace(/@ì´ì€ì§€10423/g, '<span class="mention">@ì´ì€ì§€10423</span>');

            // í”„ë¡œí•„ ì´ë¯¸ì§€ URL ì ìš©
            let bgStyle = "";
            if (charInfo.img) {
                bgStyle = `background-image: url('${charInfo.img}');`;
            } else {
                bgStyle = `background-image: none; background-color: #CFD8DC;`;
            }

            msgDiv.innerHTML = `
                <div class="profile-img" 
                     style="${bgStyle}" 
                     onclick="showProfile('${data.name}')"></div>
                <div class="message-content">
                    <div class="nickname">${data.name}</div>
                    <div class="bubble">${highlightedText}</div>
                </div>
            `;
            
            chatLog.appendChild(msgDiv);
            chatLog.scrollTop = chatLog.scrollHeight;

            // ë©˜ì…˜(@ì´ì€ì§€10423) ë‹¹í•  ë•Œ ë…¸ì´ì¦ˆ + í™”ë©´ í”ë“¤ë¦¼ íš¨ê³¼ ë°œë™
            if (data.text.includes("@ì´ì€ì§€10423")) {
                container.classList.add('shake-active');
                noiseLayer.classList.add('glitch-active');
                
                // 0.5ì´ˆ ë’¤ íš¨ê³¼ ì œê±°
                setTimeout(() => {
                    container.classList.remove('shake-active');
                    noiseLayer.classList.remove('glitch-active');
                }, 500);
            }

            index++;
            const nextDelay = Math.random() * 1200 + 800;
            setTimeout(addMessage, nextDelay);
        }
    }

    setTimeout(addMessage, 1500);
</script>

</body>
</html>
